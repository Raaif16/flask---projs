{% extends "base.html" %}

{% block content %}
<h2>All Blog Posts</h2>

{% for post in posts %}
<div class="post">
    <h3>
        <a href="/post/{{ post._id }}">
            {{ post.title }}
        </a>
    </h3>

    <p><strong>Author:</strong> {{ post.author }}</p>
    <p><strong>Date:</strong>
        {% if post.created_at %}
        {{ post.created_at.strftime("%Y-%m-%d %H:%M") }}
        {% else %}
        N/A
        {% endif %}
    </p>

    {% if session.get("user_id") == post.author_id %}
    <a href="/edit/{{ post._id }}">Edit</a>
    <a href="/delete/{{ post._id }}">Delete</a>
    {% endif %}
</div>
{% else %}
<p>No posts yet.</p>
{% endfor %}

{% endblock %}